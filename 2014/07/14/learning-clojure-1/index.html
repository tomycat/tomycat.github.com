<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  <title>学习 clojure 1：缘起 | jinwei&#39;s weblog</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="description" content="想学 clojure 是因为看到一篇 blog ，在 pc 上支持 600k 的并发，太疯狂了，比 Node.js的 250k 两倍还多，于是就心痒痒。并且 clojure 是 lisp 的方言，已知对 lisp 很有兴趣，但是好像它被一些人人视为「玩具」——除非你特别牛，用它是找不到工作的。而clojure和Java一样，是基于JVM的语言，所以它可以真的投入使用，比如 Storm 就是 clo">
<meta property="og:type" content="article">
<meta property="og:title" content="学习 clojure 1：缘起">
<meta property="og:url" content="http://tomycat.github.io/2014/07/14/learning-clojure-1/">
<meta property="og:site_name" content="jinwei's weblog">
<meta property="og:description" content="想学 clojure 是因为看到一篇 blog ，在 pc 上支持 600k 的并发，太疯狂了，比 Node.js的 250k 两倍还多，于是就心痒痒。并且 clojure 是 lisp 的方言，已知对 lisp 很有兴趣，但是好像它被一些人人视为「玩具」——除非你特别牛，用它是找不到工作的。而clojure和Java一样，是基于JVM的语言，所以它可以真的投入使用，比如 Storm 就是 clo">
<meta property="og:image" content="/blog/images/2014-07-14-learning-clure-1/0.png">
<meta property="og:image" content="/blog/images/2014-07-14-learning-clure-1/1.png">
<meta property="og:image" content="/blog/images/2014-07-14-learning-clure-1/2.png">
<meta property="og:image" content="/blog/images/2014-07-14-learning-clure-1/3.png">
<meta property="og:image" content="/blog/images/2014-07-14-learning-clure-1/4.png">
<meta property="og:image" content="/blog/images/2014-07-14-learning-clure-1/5.png">
<meta property="og:image" content="/blog/images/2014-07-14-learning-clure-1/6.png">
<meta property="og:image" content="/blog/images/2014-07-14-learning-clure-1/7.png">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="学习 clojure 1：缘起">
<meta name="twitter:description" content="想学 clojure 是因为看到一篇 blog ，在 pc 上支持 600k 的并发，太疯狂了，比 Node.js的 250k 两倍还多，于是就心痒痒。并且 clojure 是 lisp 的方言，已知对 lisp 很有兴趣，但是好像它被一些人人视为「玩具」——除非你特别牛，用它是找不到工作的。而clojure和Java一样，是基于JVM的语言，所以它可以真的投入使用，比如 Storm 就是 clo">

  
    <link rel="alternative" href="/atom.xml" title="jinwei&#39;s weblog" type="application/atom+xml">
  
  
    <link rel="icon" href="/favicon.png">
  
  <link href="//fonts.googleapis.com/css?family=Source+Code+Pro" rel="stylesheet" type="text/css">
  <link rel="stylesheet" href="/css/style.css" type="text/css">

  
</head>
<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <a href="/" id="logo">jinwei&#39;s weblog</a>
      </h1>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"></a>
        
          <a class="main-nav-link" href="/">Home</a>
        
          <a class="main-nav-link" href="/archives">Archives</a>
        
      </nav>
      <nav id="sub-nav">
        
          <a id="nav-rss-link" class="nav-icon" href="/atom.xml" title="RSS Feed"></a>
        
        <a id="nav-search-btn" class="nav-icon" title="Search"></a>
      </nav>
      <div id="search-form-wrap">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" results="0" class="search-form-input" placeholder="Search"><input type="submit" value="&#xF002;" class="search-form-submit"><input type="hidden" name="q" value="site:http://tomycat.github.io"></form>
      </div>
    </div>
  </div>
</header>
      <div class="outer">
        <section id="main"><article id="default-learning-clojure-1" class="article article-type-default" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2014/07/14/learning-clojure-1/" class="article-date">
  <time datetime="2014-07-13T16:00:00.000Z" itemprop="datePublished">7月 14 2014</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 class="article-title" itemprop="name">
      学习 clojure 1：缘起
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>想学 clojure 是因为看到一篇 blog ，在 pc 上支持 600k 的并发，太疯狂了，比 Node.js<br>的 250k 两倍还多，于是就心痒痒。并且 clojure 是 lisp 的方言，已知对 lisp 很有兴趣，<br>但是好像它被一些人人视为「玩具」——除非你特别牛，用它是找不到工作的。而clojure和<br>Java一样，是基于JVM的语言，所以它可以真的投入使用，比如 Storm 就是 clojure 的应用。</p>
<ol>
<li><p>clojure 的高并发能力</p>
<ul>
<li>因为它是 lock-free 的 [5]</li>
</ul>
</li>
<li><p>Mac 下安装lein<br>在已经有 Java 环境的情况下，安装非常简单：</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">brew <span class="keyword">install</span> leiningen</div></pre></td></tr></table></figure>

<p>然后执行下面的命令，开启 repl</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">lein repl</div></pre></td></tr></table></figure>
</li>
<li><p>环境搭建：Emacs+cider [4]</p>
<ul>
<li>M-x package-install [RET] cider [RET]</li>
<li><p>使用 lein 创建一个项目<br>lein new demo</p>
<p><img src="/blog/images/2014-07-14-learning-clure-1/0.png" alt="0.png"></p>
<p><img src="/blog/images/2014-07-14-learning-clure-1/1.png" alt="1.png"></p>
<p><img src="/blog/images/2014-07-14-learning-clure-1/2.png" alt="2.png"></p>
</li>
<li><p>用 Emacs 打开 demo/src/demo/core.clj，执行 M-x cider-jack-in （或使用快捷键 C-c M-j ）开启 nREPL server 以及 Emacs client ，这样就可以在 Emacs 中和后台的 server 交互了<br>如果出现如下的报错：ider-jack-in can’t find cider-nrepl</p>
<p>添加一个文件 ~/.lein/profiles.clj</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">{:user {:plugins <span class="string">[[cider/cider-nrepl "0.7.0-SNAPSHOT"]]</span>}}</div></pre></td></tr></table></figure>
</li>
<li><p>在编辑器中测试代码：在 demo/src/demo/core.clj 里面</p>
<ul>
<li>C-x C-e 移动光标到s-exp括号后面，就是是执行这个表达式</li>
<li><p>注意在执行 (foo “hello”) 之前，要执行前面的两个表达式</p>
<p><img src="/blog/images/2014-07-14-learning-clure-1/3.png" alt="3.png"></p>
</li>
</ul>
</li>
<li><p>在repl中执行代码</p>
<p><img src="/blog/images/2014-07-14-learning-clure-1/4.png" alt="4.png"></p>
</li>
<li><p>使用 lein 在 termial 中执行代码 </p>
<p><img src="/blog/images/2014-07-14-learning-clure-1/5.png" alt="5.png"></p>
<p>可以看到，缺少 main 函数，修改下代码</p>
<p><img src="/blog/images/2014-07-14-learning-clure-1/6.png" alt="6.png"></p>
<p>也可以指定为其它的函数为入口函数</p>
<p><img src="/blog/images/2014-07-14-learning-clure-1/7.png" alt="7.png"></p>
</li>
<li><p>project.clj 的所有配置项目见 <a href="https://github.com/technomancy/leiningen/blob/stable/sample.project.clj" target="_blank" rel="external">https://github.com/technomancy/leiningen/blob/stable/sample.project.clj</a></p>
</li>
<li>Emacs 的快捷键见 <a href="https://github.com/clojure-emacs/cider" target="_blank" rel="external">https://github.com/clojure-emacs/cider</a> cider-mode Keyboard shortcut</li>
</ul>
</li>
<li><p>学习 learning 需要 Java 的经验吗？[1]</p>
<ul>
<li>clojure 是lisp的方言，和Java很不相同，所以从语言角度来说，不需要</li>
<li><p>使用已经存在的Java API，那必须还是要和Java打交道</p>
<p>You don’t need to write any Java code to use Java APIs from Clojure, but you do need to know enough Java (method signatures, data types etc.) to be able to read the JavaDoc documentation of the APIs and convert this into an appropriate Clojure function call. Often, this is as simple as (.someJavaMethod someJavaObject param1 param2) but sometimes it can be more complex (e.g. when you need to instantiate a subclass of some Java class to pass as a parameter)</p>
</li>
<li><p>clojure 是最终会编译为JVM字节码，所以精通Java，应该是有好处的</p>
</li>
</ul>
</li>
<li><p>在哪里寻找第三方的库？</p>
<ul>
<li>clojure-contrib [8] </li>
<li>leiningen [9]</li>
</ul>
</li>
<li><p>clojure 的中小项目[2]</p>
<ul>
<li>cow-blog [7]</li>
<li>使用 lein 构建一个web应用 guest-book</li>
</ul>
</li>
<li><p>甚至有一个 clojure-android 的项目，可以让你在 android 上使用 clojure [6]</p>
<p>但是这时一个 hobby project ，性能很成问题</p>
</li>
</ol>
<h3 id="Footnotes">Footnotes</h3>
<p>[1] <a href="http://stackoverflow.com/questions/5721496/learning-java-so-i-can-get-at-clojure" target="_blank" rel="external">http://stackoverflow.com/questions/5721496/learning-java-so-i-can-get-at-clojure</a></p>
<p>[2] <a href="http://stackoverflow.com/questions/329221/medium-size-clojure-sample-application" target="_blank" rel="external">http://stackoverflow.com/questions/329221/medium-size-clojure-sample-application</a></p>
<p>[3] <a href="http://dev.clojure.org/display/community/Clojure%2BSuccess%2BStories" target="_blank" rel="external">http://dev.clojure.org/display/community/Clojure%2BSuccess%2BStories</a></p>
<p>[4] <a href="https://github.com/clojure-emacs/cider" target="_blank" rel="external">https://github.com/clojure-emacs/cider</a></p>
<p>[5] <a href="http://stackoverflow.com/questions/11031886/is-clojure-lockfree-by-using-lockfree-algorithms" target="_blank" rel="external">http://stackoverflow.com/questions/11031886/is-clojure-lockfree-by-using-lockfree-algorithms</a></p>
<p>[6] <a href="http://clojure-android.info/" target="_blank" rel="external">http://clojure-android.info/</a></p>
<p>[7] <a href="https://github.com/briancarper/cow-blog" target="_blank" rel="external">https://github.com/briancarper/cow-blog</a></p>
<p>[8] <a href="http://github.com/richhickey/clojure-contrib" target="_blank" rel="external">http://github.com/richhickey/clojure-contrib</a></p>
<p>[9] <a href="http://zef.me/2470/building-clojure-projects-with-leiningen" target="_blank" rel="external">http://zef.me/2470/building-clojure-projects-with-leiningen</a></p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://tomycat.github.io/2014/07/14/learning-clojure-1/" data-id="ova0bwb7bjs3no71" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/clojure/">clojure</a></li></ul>

    </footer>
  </div>
  
    
<nav id="article-nav">
  
    <a href="/2014/07/15/learning-clojure-2/" id="article-nav-newer" class="article-nav-link-wrap">
      <strong class="article-nav-caption">Newer</strong>
      <div class="article-nav-title">
        
          学习 clojure 2 ： 《Clojure程序设计》 Clojure 简介
        
      </div>
    </a>
  
  
    <a href="/2014/07/12/ios-dev-first-impression/" id="article-nav-older" class="article-nav-link-wrap">
      <strong class="article-nav-caption">Older</strong>
      <div class="article-nav-title"></div>
    </a>
  
</nav>

  
</article>

</section>
        
          <aside id="sidebar">
  
    
  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Tags</h3>
    <div class="widget">
      <ul class="tag-list"><li class="tag-list-item"><a class="tag-list-link" href="/tags/clojure/">clojure</a><span class="tag-list-count">4</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/cordova/">cordova</a><span class="tag-list-count">3</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/javascript/">javascript</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/life/">life</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/mongodb/">mongodb</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/other/">other</a><span class="tag-list-count">8</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/phonegap/">phonegap</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/startup/">startup</a><span class="tag-list-count">1</span></li></ul>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Tag Cloud</h3>
    <div class="widget tagcloud">
      <a href="/tags/clojure/" style="font-size: 17.50px;">clojure</a><a href="/tags/cordova/" style="font-size: 15.00px;">cordova</a><a href="/tags/javascript/" style="font-size: 12.50px;">javascript</a><a href="/tags/life/" style="font-size: 12.50px;">life</a><a href="/tags/mongodb/" style="font-size: 10.00px;">mongodb</a><a href="/tags/other/" style="font-size: 20.00px;">other</a><a href="/tags/phonegap/" style="font-size: 10.00px;">phonegap</a><a href="/tags/startup/" style="font-size: 10.00px;">startup</a>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Archives</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2014/07">七月 2014</a><span class="archive-list-count">7</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2014/06">六月 2014</a><span class="archive-list-count">5</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2014/05">五月 2014</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2013/12">十二月 2013</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2013/11">十一月 2013</a><span class="archive-list-count">5</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2013/10">十月 2013</a><span class="archive-list-count">4</span></li></ul>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Recents</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/2014/07/20/testmd/">test.md</a>
          </li>
        
          <li>
            <a href="/2014/07/19/learning-clojure-company/">Clojure 的发展情况</a>
          </li>
        
          <li>
            <a href="/2014/07/16/learning-clojure-3/">学习 clojure 3 ：《Clojure程序设计》 Clojure 编程入门 - 在 repl 中测试代码</a>
          </li>
        
          <li>
            <a href="/2014/07/15/learning-clojure-2/">学习 clojure 2 ： 《Clojure程序设计》 Clojure 简介</a>
          </li>
        
          <li>
            <a href="/2014/07/14/learning-clojure-1/">学习 clojure 1：缘起</a>
          </li>
        
      </ul>
    </div>
  </div>

  
</aside>
        
      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      &copy; 2014 Jinwei Tang<br>
      Powered by <a href="http://hexo.io/" target="_blank">Hexo</a>
    </div>
  </div>
</footer>
    </div>
    <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">Home</a>
  
    <a href="/archives" class="mobile-nav-link">Archives</a>
  
</nav>
    

<script src="//ajax.googleapis.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script>


  <link rel="stylesheet" href="/fancybox/jquery.fancybox.css" type="text/css">

  <script src="/fancybox/jquery.fancybox.pack.js" type="text/javascript"></script>



<script src="/js/script.js" type="text/javascript"></script>

  </div>
</body>
</html>